(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{127:function(e,t,a){e.exports=a(158)},132:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(20),i=a.n(l),s=(a(132),a(48)),o=a(55),c=a(58),u=a(59),m=a(67),p=a(60),h=a(68),d=a(10),E=a(35),v=function(e){return localStorage.getItem("token")?r.a.createElement("nav",null,r.a.createElement(d.c,{className:"nav-link",to:"/"},"Home"),r.a.createElement(d.c,{className:"nav-link",to:"/account"},"Account"),r.a.createElement(d.c,{className:"nav-link",to:"/relationships"},"Connections"),r.a.createElement(d.c,{className:"nav-link",to:"/events/upcoming"},"Events"),r.a.createElement(d.c,{to:"/login",className:"nav-link",onClick:function(){e.handleLogout()}},"Logout")):r.a.createElement("nav",null,r.a.createElement(d.c,{className:"nav-link",to:"/"},"Home"),r.a.createElement(d.c,{className:"nav-link",to:"/login"},"Login"),r.a.createElement(d.c,{className:"nav-link",to:"/signup"},"Sign Up"))},f=a(164),b=a(167),g=a(5),w=function(e){return new Date(e).toDateString().split(" ")},y=function(e){var t=w(e);return Object(g.a)(t,1)[0]},j=function(e){var t=w(e);return Object(g.a)(t,2)[1]},N=function(e){var t=w(e);return Object(g.a)(t,3)[2]},O=function(e){var t=w(e);return Object(g.a)(t,4)[3]},_=function(e){var t=new Date(e).toTimeString().split(" ")[0].split(":"),a=Object(g.a)(t,2),n=a[0],r=a[1],l="am";return"00"===n?n="12":n>12?(n-=12,l="pm"):n<10&&(n=n.slice(1,2)),"".concat(n,":").concat(r," ").concat(l)},C=function(e){var t=e.split("T"),a=Object(g.a)(t,2),n=a[0],r=a[1],l=n.split("-"),i=Object(g.a)(l,3),s=i[0],o=i[1],c=i[2],u=r.split(":"),m=Object(g.a)(u,2),p=m[0],h=m[1];return new Date(Date.UTC(s,o-1,c,p,h))},S=function(e){if(e){var t=e.slice(0,2),a=e.slice(2,5),n=e.slice(5,8),r=e.slice(8);return"".concat(t," (").concat(a,") ").concat(n,"-").concat(r)}return"not given"},R=a(165),D=a(166),k=a(163),I="https://git.heroku.com/lit-taiga-97735.git",L=function(e){return{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(e)}}},T=function(e,t,a){return{method:"".concat(e),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({name:a.eventName,start_date:a.startDate,end_date:a.endDate,location:a.location,description:a.description,user_id:a.userId})}},F=function(e,t){return fetch("".concat(I,"/events"),L(e)).then(function(e){return e.json()}).then(function(e){t(e)})},A=function(e,t,a){return fetch("".concat(I,"/relationship_events"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({relationship_id:a.inviteeId,event_id:e.id})}).then(function(e){return e.json()}).then(function(e){P(e.event_id,t,a)})},P=function(e,t,a){return fetch("".concat(I,"/events/").concat(e),L(t)).then(function(e){return e.json()}).then(function(e){a.handleNewEvent(e),z(e.relationships[0].id,t,a)})},z=function(e,t,a){return fetch("".concat(I,"/relationships/").concat(e),L(t)).then(function(e){return e.json()}).then(function(e){a.updateRelationships(e),a.viewRelationship(e)})},G=function(e,t,a,n){fetch("".concat(I,"/relationship_events/").concat(e),function(e,t,a){return{method:"".concat(e),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({event_id:a.event.id,relationship_id:a.inviteeId})}}("PATCH",t,n)).then(function(e){return e.json()}).then(function(e){x(e.event_id,t,n).then(z(e.relationship_id,t,n)).then(z(a.relationships[0].id,t,n))})},x=function(e,t,a){return console.log("getting event"),fetch("".concat(I,"/events/").concat(e),L(t)).then(function(e){return e.json()}).then(function(e){a.updateEvents(e)})},B=function(e){var t=function(t){t.preventDefault(),e.handleClose(),function(e){var t=localStorage.getItem("token");fetch("".concat(I,"/events"),T("POST",t,e)).then(function(e){return e.json()}).then(function(a){A(a,t,e)})}(e)},a=function(t){t.preventDefault(),e.handleClose(),function(e,t){var a=localStorage.getItem("token"),n=t.relationship.id!==t.inviteeId;fetch("".concat(I,"/events/").concat(e.id),T("PATCH",a,t)).then(function(e){return e.json()}).then(function(r){n?(console.log("new invite!"),G(r.relationship_events[0].id,a,e,t)):(console.log("same old!"),t.updateEvents(r))})}(e.event,e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.b,{to:"/events/upcoming"},e.handleNewEvent?r.a.createElement(b.a,{variant:"primary",type:"submit",onClick:function(e){return t(e)}},"Create"):r.a.createElement(b.a,{variant:"primary",type:"submit",onClick:function(e){return a(e)}},"Edit")))},U=function(e){return r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"Event Name"),r.a.createElement(D.a.Control,{type:"text",placeholder:"Enter event name",value:e.eventName,onChange:function(t){return e.setEventName(t.target.value)}}))},H=function(e){return r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"Invite:"),r.a.createElement(D.a.Control,{as:"select",value:e.inviteeId,onChange:function(t){e.setInviteeId(t.target.value)},onClick:function(e){return console.log(e.target.value)}},e.relationship?r.a.createElement("option",{value:e.relationship.id},"".concat(e.relationship.first_name," ").concat(e.relationship.last_name)):e.relationships&&0!==e.relationships.length?e.relationships.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},"".concat(e.first_name," ").concat(e.last_name))}):void 0))},q=function(e){return r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"Location"),r.a.createElement(D.a.Control,{type:"text",placeholder:"Enter event location",value:e.location,onChange:function(t){return e.setLocation(t.target.value)}}))},V=a(105),J=a(42),M=(a(93),a(122)),Y=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a.Row,null,r.a.createElement(D.a.Group,{as:V.a},r.a.createElement(D.a.Label,null,"Start Date"),r.a.createElement(J.a,{selected:e.startDate,onChange:function(t){e.setStartDate(t)},minDate:Object(M.a)(new Date,0)})),r.a.createElement(D.a.Group,{as:V.a},r.a.createElement(D.a.Label,null,"Start Time"),r.a.createElement(J.a,{selected:e.startDate,onChange:function(t){return e.setStartDate(t)},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:30,dateFormat:"h:mm aa",timeCaption:"Time"}))))},Z=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a.Row,null,r.a.createElement(D.a.Group,{as:V.a},r.a.createElement(D.a.Label,null,"End Date"),r.a.createElement(J.a,{selected:e.endDate,onChange:function(t){return e.setEndDate(t)},minDate:Object(M.a)(e.startDate,0)})),r.a.createElement(D.a.Group,{as:V.a},r.a.createElement(D.a.Label,null,"End Time"),r.a.createElement(J.a,{selected:e.endDate,onChange:function(t){return e.setEndDate(t)},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:30,dateFormat:"h:mm aa",timeCaption:"Time"}))))},W=function(e){return r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"Description"),r.a.createElement(D.a.Control,{type:"text",placeholder:"Enter event description",value:e.description,onChange:function(t){return e.setDescription(t.target.value)}}))},$=function(e){var t=Object(n.useState)(e.event?e.event.name:""),a=Object(g.a)(t,2),l=a[0],i=a[1],s=Object(n.useState)(e.event?e.event.location:""),o=Object(g.a)(s,2),c=o[0],u=o[1],m=Object(n.useState)(e.event?e.event.description:""),p=Object(g.a)(m,2),h=p[0],d=p[1],E=Object(n.useState)(e.event?C(e.event.start_date):new Date),v=Object(g.a)(E,2),f=v[0],w=v[1],y=Object(n.useState)(e.event?C(e.event.end_date):f),j=Object(g.a)(y,2),N=j[0],O=j[1],_=Object(n.useState)(e.event||e.relationship?e.relationship.id:e.relationships[0].id),S=Object(g.a)(_,2),I=S[0],L=S[1];return Object(n.useEffect)(function(e){e<f&&O(f)},[f]),r.a.createElement(D.a,null,r.a.createElement(R.a.Body,null,r.a.createElement(U,{eventName:l,setEventName:i}),r.a.createElement(H,Object.assign({inviteeId:I,setInviteeId:L},e)),r.a.createElement(q,{location:c,setLocation:u}),r.a.createElement(Y,{startDate:f,setStartDate:w}),r.a.createElement(Z,{endDate:N,setEndDate:O,startDate:f}),r.a.createElement(W,{description:h,setDescription:d})),r.a.createElement(R.a.Footer,null,r.a.createElement(k.a,null,r.a.createElement(b.a,{variant:"secondary",onClick:function(){return e.handleClose()}},"Close"),r.a.createElement(B,Object.assign({},e,{inviteeId:I,eventName:l,startDate:f,endDate:N,location:c,description:h})))))},K=function(e){return e.relationships.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{show:e.show,onHide:function(){return e.handleClose()}},r.a.createElement(R.a.Header,{closeButton:!0},r.a.createElement(R.a.Title,null,e.handleNewEvent?"New Event":"Edit Event")),r.a.createElement($,Object.assign({handleClose:e.handleClose},e)))):r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{show:e.show,onHide:function(){return e.handleClose()}},r.a.createElement(R.a.Body,null,r.a.createElement("p",null,"You'll need connections first before you can plan any events!")),r.a.createElement(b.a,{variant:"secondary",onClick:function(){return e.handleClose()}},"Close")))},Q=function(e){var t=Object(n.useState)(!1),a=Object(g.a)(t,2),l=a[0],i=a[1],s=e.relationship?e.relationship:e.event.relationships[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{className:"edit-btn",size:"sm",onClick:function(){return i(!0)}},"Edit"),r.a.createElement(K,{show:l,handleClose:function(){return i(!1)},updateEvents:e.updateEvents,event:e.event,relationship:s,relationships:e.relationships,updateRelationships:e.updateRelationships,viewRelationship:e.viewRelationship}))},X=function(e){return r.a.createElement(b.a,{onClick:function(){return function(e){var t=localStorage.getItem("token");fetch("".concat(I,"/events/").concat(e.event.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).then(function(t){e.handleDeletedEvent(t)})}(e)},className:"delete-btn",size:"sm"},"Cancel")},ee=function(e){return r.a.createElement("div",{className:"event-card"},r.a.createElement("span",{className:"day"},y(e.event.start_date)),r.a.createElement("div",{className:"event-date"},r.a.createElement("span",{className:"month"},j(e.event.start_date)),r.a.createElement("br",null),r.a.createElement("span",{className:"date"},N(e.event.start_date)),r.a.createElement("br",null),r.a.createElement("span",{className:"year"},O(e.event.start_date))),r.a.createElement("div",{className:"event-details"},r.a.createElement(d.b,{to:"/event/${props.event.name",onClick:function(){return e.viewEvent(e.event)}},r.a.createElement("span",{className:"event-name"},e.event.name),r.a.createElement("br",null)),r.a.createElement("span",{className:"time"},_(e.event.start_date)),r.a.createElement("br",null),r.a.createElement("span",{className:"location"},e.event.location),r.a.createElement("br",null)),function(){if(e.relationships)return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,{event:e.event,updateEvents:e.updateEvents,relationship:e.relationship,relationships:e.relationships,updateRelationships:e.updateRelationships,viewRelationship:e.viewRelationship}),r.a.createElement(X,{event:e.event,updateEvents:e.updateEvents,handleDeletedEvent:e.handleDeletedEvent}))}()," ")},te=function(e){var t=Object(n.useState)(!1),a=Object(g.a)(t,2),l=a[0],i=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{className:"alt-primary-btn .new-btn",variant:"primary",size:"sm",onClick:function(){return i(!0)}},"New Event"),r.a.createElement(K,Object.assign({show:l,handleClose:function(){return i(!1)},handleNewEvent:e.handleNewEvent},e)))},ae=function(e){return r.a.createElement("div",{className:"events-list"},e.match&&"/events/past"===e.match.url?r.a.createElement("h3",null,"Past Events"):e.match&&"/events/upcoming"===e.match.url?r.a.createElement("h3",null,"Upcoming Events"):r.a.createElement("div",{className:"connection-events"},r.a.createElement("h3",null,"Upcoming Events"),r.a.createElement(te,{userId:e.userId,relationship:e.relationship,relationships:e.relationships,viewRelationship:e.viewRelationship,updateRelationships:e.updateRelationships,handleNewEvent:e.handleNewEvent})),function(){if(e.events&&0!==e.events.length)return e.events.map(function(t){return r.a.createElement(ee,Object.assign({key:t.id,event:t,viewEvent:e.viewEvent},e))})}())},ne=function(e){var t=e.events.future_events,a=e.events.past_events;return r.a.createElement(f.a,{className:"events-container"},r.a.createElement("h2",null,"Events"),r.a.createElement(te,{userId:e.userId,relationships:e.relationships,viewRelationship:e.viewRelationship,updateRelationships:e.updateRelationships,handleNewEvent:e.handleNewEvent}),r.a.createElement("div",{className:"events-1"},r.a.createElement(d.b,{to:"/events/past"},r.a.createElement(b.a,{className:"event-btn past-btn"},"Past Events"))),r.a.createElement("div",{className:"events-2"},r.a.createElement(d.b,{to:"/events/upcoming"},r.a.createElement(b.a,{className:"event-btn upcoming-btn"},"Upcoming Events"))),r.a.createElement(E.b,{path:"/events/upcoming",exact:!0,render:function(a){return r.a.createElement(ae,Object.assign({},a,{events:t,relationships:e.relationships,viewEvent:e.viewEvent,viewRelationship:e.viewRelationship,updateEvents:e.updateEvents,updateRelationships:e.updateRelationships,handleDeletedEvent:e.handleDeletedEvent}))}}),r.a.createElement(E.b,{path:"/events/past",exact:!0,render:function(t){return r.a.createElement(ae,Object.assign({},t,{events:a,viewEvent:e.viewEvent}))}}))},re=function(e){return e.event.name?r.a.createElement(f.a,{className:"event-profile"},r.a.createElement("div",{className:"event-profile-card"},r.a.createElement("span",{className:"day"},y(e.event.start_date)),r.a.createElement("div",{className:"event-date"},r.a.createElement("span",{className:"month"},j(e.event.start_date)),r.a.createElement("br",null),r.a.createElement("span",{className:"date"},N(e.event.start_date)),r.a.createElement("br",null),r.a.createElement("span",{className:"year"},O(e.event.start_date))),r.a.createElement("div",{className:"event-profile-header"},r.a.createElement("h3",null,e.event.name?e.event.name:null),r.a.createElement("span",null,"with ",function(e){if(e&&0!==e.length){for(var t="",a=0;a<e.length-1;)t+="".concat(e[a].first_name," ").concat(e[a].last_name,", "),a++;return t+="".concat(e[a].first_name," ").concat(e[a].last_name)}}(e.event.relationships))),r.a.createElement("div",{className:"event-profile-subinfo"},r.a.createElement("span",null,function(e){var t=new Date(e).toDateString().split(" "),a=Object(g.a)(t,4),n=a[0],r=a[1],l=a[2],i=a[3];return"".concat(n,", ").concat(r," ").concat(l,", ").concat(i)}(e.event.start_date)," at ",_(e.event.start_date)),r.a.createElement("br",null),r.a.createElement("span",null,e.event.location),r.a.createElement("br",null)),r.a.createElement("div",{className:"event-description"},r.a.createElement("p",null,"More about this event:"),r.a.createElement("p",null,e.event.description)))):r.a.createElement(E.a,{to:"/events/upcoming"})},le=function(e){return r.a.createElement(f.a,{className:"landing-page"},r.a.createElement("div",{className:"jumbotron"},r.a.createElement("div",{className:"bg-image"}),r.a.createElement("h1",null,"Stay Connected"),r.a.createElement("p",null,"Keep track of the connections you care about ",r.a.createElement("br",null),"and make plans for that next coffee date."),r.a.createElement("p",null,e.user?r.a.createElement(d.b,{to:"/relationships"},r.a.createElement(b.a,{variant:"primary"},"See my connections")):r.a.createElement(r.a.Fragment,null,r.a.createElement(d.b,{to:"/signup"},r.a.createElement(b.a,{variant:"primary"},"Get Started"))," or ",r.a.createElement(d.b,{to:"/login"}," log in here")))))},ie=function(e){return r.a.createElement(D.a.Group,{as:V.a},r.a.createElement(D.a.Label,null,"First Name"),r.a.createElement(D.a.Control,{type:"text",placeholder:"Enter first name",value:e.firstName,onChange:function(t){return e.setFirstName(t.target.value)}}))},se=function(e){return r.a.createElement(D.a.Group,{as:V.a},r.a.createElement(D.a.Label,null,"Last Name"),r.a.createElement(D.a.Control,{type:"text",placeholder:"Enter last name",value:e.lastName,onChange:function(t){return e.setLastName(t.target.value)}}))},oe=function(e){return r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"Email"),r.a.createElement(D.a.Control,{type:"email",placeholder:"Enter email",value:e.email,onChange:function(t){return e.setEmail(t.target.value)}}))},ce=function(e){return r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"Phone Number"),r.a.createElement(D.a.Control,{type:"text",placeholder:"Enter phone number",value:e.phone,onChange:function(t){return e.setPhone(t.target.value)}}),r.a.createElement(D.a.Text,null,"Include country code. Example: +1"))},ue=function(e){return r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"Image Url"),r.a.createElement(D.a.Control,{type:"text",placeholder:"Enter image url",value:e.image,onChange:function(t){return e.setImage(t.target.value)}}))},me=function(e){var t=Object(n.useState)(e.user.first_name),a=Object(g.a)(t,2),l=a[0],i=a[1],s=Object(n.useState)(e.user.last_name),o=Object(g.a)(s,2),c=o[0],u=o[1],m=Object(n.useState)(e.user.email),p=Object(g.a)(m,2),h=p[0],d=p[1],E=Object(n.useState)(e.user.phone_number),v=Object(g.a)(E,2),f=v[0],w=v[1],y=Object(n.useState)(e.user.image),j=Object(g.a)(y,2),N=j[0],O=j[1];Object(n.useEffect)(function(){i(e.user.first_name),u(e.user.last_name),d(e.user.email),w(e.user.phone_number),O(e.user.image)},[e.user]);var _=function(){e.handleClose(),function(e,t){var a=localStorage.getItem("token");fetch("".concat(I,"/account/").concat(e.user.id),{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({first_name:t.firstName,last_name:t.lastName,email:t.email,phone_number:t.phone,image:t.image})}).then(function(e){return e.json()}).then(function(t){return e.updateUserProfile(t)})}(e,{firstName:l,last_name:c,email:h,phone:f,image:N})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{show:e.show,onHide:function(){return e.handleClose()}},r.a.createElement(R.a.Header,{closeButton:!0},r.a.createElement(R.a.Title,null,"Edit Profile")),r.a.createElement(D.a,null,r.a.createElement(R.a.Body,null,r.a.createElement(D.a.Row,null,r.a.createElement(ie,{firstName:l,setFirstName:i}),r.a.createElement(se,{lastName:c,setLastName:u})),r.a.createElement(oe,{email:h,setEmail:d}),r.a.createElement(ce,{phone:f,setPhone:w}),r.a.createElement(ue,{image:N,setImage:O}))),r.a.createElement(R.a.Footer,null,r.a.createElement(k.a,null,r.a.createElement(b.a,{variant:"secondary",onClick:function(){return e.handleClose()}},"Close"),r.a.createElement(b.a,{variant:"primary",type:"submit",onClick:function(){return _()}},"Edit")))))},pe=function(e){var t,a,l=Object(n.useState)(!1),i=Object(g.a)(l,2),s=i[0],o=i[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{className:"profile-container"},r.a.createElement("img",{src:"".concat(e.user.image),className:"profile-img",alt:"".concat(e.user.first_name," ").concat(e.user.last_name)}),r.a.createElement("div",{className:"profile-info"},r.a.createElement("h1",null,(t=e.user.first_name,a=e.user.last_name,"".concat(t," ").concat(a))),r.a.createElement("p",null,r.a.createElement("i",{class:"fas fa-envelope"})," Email: ",e.user.email),r.a.createElement("p",null,r.a.createElement("i",{class:"fas fa-mobile-alt"})," Phone: ",S(e.user.phone_number))),r.a.createElement(b.a,{size:"sm",className:"profile-edit-btn alt-primary-btn",onClick:function(){return o(!0)}},"Edit"),r.a.createElement(me,{show:s,handleClose:function(){return o(!1)},user:e.user,updateUserProfile:e.updateUserProfile})))},he=function(e){if(e.events.length>0){var t=Date.now(),a=e.events.filter(function(e){return Date.parse(e.end_date)<t}).sort(function(e,t){return e.end_date-t.end_date});if(a.length>0){var n=a[a.length-1],r=new Date(n.end_date).toString().split(" "),l=Object(g.a)(r,4),i=l[0],s=l[1],o=l[2],c=l[3];return"".concat(i," ").concat(s," ").concat(o,", ").concat(c)}}return"You haven't met up yet!"},de=function(e){var t=Date.now(),a=Date.parse(e),n=Math.abs(t-a);return Math.ceil(n/864e5)},Ee=function(e,t,a){return{method:"".concat(e),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({first_name:a.firstName,last_name:a.lastName,relationship_type:a.relType,image:a.image,email:a.email,phone_number:a.phone,contact_frequency:a.contact_frequency,user_id:a.userId})}},ve=function(e,t){return fetch("".concat(I,"/relationships"),L(e)).then(function(e){return e.json()}).then(function(e){t(e)})},fe=function(e){var t=function(){return function(e){var t=localStorage.getItem("token");fetch("".concat(I,"/relationships/").concat(e.relationship.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).then(function(t){e.handleDeletedRelationship(t)})}(e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{className:"rel-delete-btn",size:"sm",onClick:function(){return t()}},"Remove"))},be=function(e){return r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"Relationship Type"),r.a.createElement(D.a.Control,{as:"select",value:e.relType,onChange:function(t){return e.setRelType(t.target.value)}},r.a.createElement("option",null,"Friend"),r.a.createElement("option",null,"Co-worker"),r.a.createElement("option",null,"Classmate"),r.a.createElement("option",null,"Family"),r.a.createElement("option",null,"Significant Other"),r.a.createElement("option",null,"Other")))},ge=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"How often do you want to connect?"),r.a.createElement(D.a.Control,{as:"select",value:e.currentInterval,onChange:function(t){e.setCurrentInterval(t.target.value)}},Object(s.a)(Array(99).keys()).map(function(e){var t="day";return e+1!==1&&(t="days"),r.a.createElement("option",{key:e+1,value:e+1},e+1," ",t)}))))},we=function(e){var t=function(t){t.preventDefault(),e.handleClose(),function(e){var t=localStorage.getItem("token");fetch("".concat(I,"/relationships"),Ee("POST",t,e)).then(function(e){return e.json()}).then(function(t){return e.handleNewRelationship(t)})}(e)},a=function(t){t.preventDefault(),e.handleClose(),function(e){var t=localStorage.getItem("token");fetch("".concat(I,"/relationships/").concat(e.relationship.id),Ee("PATCH",t,e)).then(function(e){return e.json()}).then(function(t){e.updateRelationships(t),e.viewRelationship(t)})}(e)};return r.a.createElement("div",null,e.handleNewRelationship?r.a.createElement(b.a,{variant:"primary",type:"submit",onClick:function(e){return t(e)}},"Create"):r.a.createElement(b.a,{variant:"primary",type:"submit",onClick:function(e){return a(e)}},"Edit"))},ye=function(e){var t=Object(n.useState)(e.relationship?e.relationship.first_name:""),a=Object(g.a)(t,2),l=a[0],i=a[1],s=Object(n.useState)(e.relationship?e.relationship.last_name:""),o=Object(g.a)(s,2),c=o[0],u=o[1],m=Object(n.useState)(e.relationship?e.relationship.relationship_type:"Friend"),p=Object(g.a)(m,2),h=p[0],d=p[1],E=Object(n.useState)(e.relationship?e.relationship.email:""),v=Object(g.a)(E,2),f=v[0],w=v[1],y=Object(n.useState)(e.relationship?e.relationship.phone_number:""),j=Object(g.a)(y,2),N=j[0],O=j[1],_=Object(n.useState)(e.relationship?e.relationship.image:""),C=Object(g.a)(_,2),S=C[0],I=C[1],L=Object(n.useState)(e.relationship?e.relationship.contact_frequency:7),T=Object(g.a)(L,2),F=T[0],A=T[1];return r.a.createElement(D.a,null,r.a.createElement(R.a.Body,null,r.a.createElement(D.a.Row,null,r.a.createElement(ie,{firstName:l,setFirstName:i}),r.a.createElement(se,{lastName:c,setLastName:u})),r.a.createElement(be,{relType:h,setRelType:d}),r.a.createElement(oe,{email:f,setEmail:w}),r.a.createElement(ce,{phone:N,setPhone:O}),r.a.createElement(ue,{image:S,setImage:I}),r.a.createElement(ge,{currentInterval:F,setCurrentInterval:A})),r.a.createElement(R.a.Footer,null,r.a.createElement(k.a,null,r.a.createElement(b.a,{variant:"secondary",onClick:function(){return e.handleClose()}},"Close"),r.a.createElement(we,Object.assign({},e,{firstName:l,lastName:c,relType:h,email:f,phone:N,image:S,contact_frequency:parseInt(F)})))))},je=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{show:e.show,onHide:function(){return e.handleClose()}},r.a.createElement(R.a.Header,{closeButton:!0},r.a.createElement(R.a.Title,null,e.handleNewRelationship?"New Relationship":"Edit Relationship")),r.a.createElement(ye,Object.assign({handleClose:e.handleClose},e))))},Ne=function(e){var t=Object(n.useState)(!1),a=Object(g.a)(t,2),l=a[0],i=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{className:"rel-edit-btn profile-edit-btn",size:"sm",onClick:function(){return i(!0)}},"Edit"),r.a.createElement(je,{show:l,handleClose:function(){return i(!1)},relationship:e.relationship,viewRelationship:e.viewRelationship,updateRelationships:e.updateRelationships,userId:e.userId}))},Oe=function(e){var t=e.relationship;return r.a.createElement("div",{className:"relationship-card"},r.a.createElement("div",{className:"image-container"},r.a.createElement(d.b,{to:"/relationships/".concat(t.id),onClick:function(){return e.viewRelationship(t)}},r.a.createElement("img",{src:"".concat(t.image),alt:"".concat(t.first_name," ").concat(t.last_name)}))),r.a.createElement("div",null,r.a.createElement(d.b,{to:"/relationships/".concat(t.id),onClick:function(){return e.viewRelationship(t)}},r.a.createElement("span",{className:"name"},"".concat(t.first_name," ").concat(t.last_name)),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("span",{className:"connection"},r.a.createElement("i",{class:"fas fa-user"}),t.relationship_type),r.a.createElement("br",null),r.a.createElement("span",null,"Last met: ",he(t)),r.a.createElement("br",null)),r.a.createElement(Ne,{relationship:t,viewRelationship:e.viewRelationship,updateRelationships:e.updateRelationships,userId:e.userId}),r.a.createElement(fe,{relationship:t,handleDeletedRelationship:e.handleDeletedRelationship,updateEvents:e.updateEvents}))},_e=function(e){var t=Object(n.useState)(!1),a=Object(g.a)(t,2),l=a[0],i=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{size:"sm",className:"new-btn",onClick:function(){return i(!0)}},"New Connection"),r.a.createElement(je,{show:l,handleClose:function(){return i(!1)},handleNewRelationship:e.handleNewRelationship,userId:e.userId}))},Ce=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){var t=a.state.listOrder;switch(e){case"first_az":t=a.state.listOrder.sort(function(e,t){return e.first_name<t.first_name?-1:1});break;case"first_za":t=a.state.listOrder.sort(function(e,t){return e.first_name>t.first_name?-1:1});break;case"last_az":t=a.state.listOrder.sort(function(e,t){return e.last_name<t.last_name?-1:1});break;case"last_za":t=a.state.listOrder.sort(function(e,t){return e.last_name>t.last_name?-1:1});break;case"most_recent":t=a.state.listOrder.sort(function(e,t){return n(e,t)});break;case"least_recent":t=a.state.listOrder.sort(function(e,t){return n(e,t)}).reverse();break;case"most_freq":t=a.state.listOrder.sort(function(e,t){return t.events.length-e.events.length});break;case"least_freq":t=a.state.listOrder.sort(function(e,t){return e.events.length-t.events.length})}function n(e,t){var a=0,n=0,r=(new Date).getTime();return e.events.forEach(function(e){var t=new Date(e.end_date.toLocaleString()).getTime();t<r&&t>a&&(a=t)}),t.events.forEach(function(e){var t=new Date(e.end_date.toLocaleString()).getTime();t<r&&t>n&&(n=t)}),a>n?-1:1}a.setState({listOrder:t})},a.displayFilter=function(){return r.a.createElement("div",{className:"reorder-select"},r.a.createElement(D.a,null,r.a.createElement(D.a.Group,{controlId:"exampleForm.ControlSelect1"},r.a.createElement(D.a.Label,null,"Order by:"),r.a.createElement(D.a.Control,{as:"select",onChange:function(e){a.handleChange(e.target.value)}},r.a.createElement("option",{value:"first_az"},"First Name Alphabetically A-Z"),r.a.createElement("option",{value:"first_za"},"First Name Alphabetically Z-A"),r.a.createElement("option",{value:"last_az"},"Last Name Alphabetically A-Z"),r.a.createElement("option",{value:"last_za"},"Last Name Alphabetically Z-A"),r.a.createElement("option",{value:"most_recent"},"Most Recently Seen"),r.a.createElement("option",{value:"least_recent"},"Least Recently Seen"),r.a.createElement("option",{value:"most_freq"},"Most Frequently Seen"),r.a.createElement("option",{value:"least_freq"},"Least Frequently Seen")))))},a.displayRelationships=function(){if(0!==a.state.listOrder.length)return a.state.listOrder.map(function(e){return r.a.createElement(Oe,{key:e.id,userId:a.props.userId,relationship:e,viewRelationship:a.props.viewRelationship,updateRelationships:a.props.updateRelationships,handleDeletedRelationship:a.props.handleDeletedRelationship,updateEvents:a.props.updateEvents})})},a.displayRelationshipsPage=function(){return a.props.relationships&&0!==a.props.relationships.length?r.a.createElement(r.a.Fragment,null,a.displayFilter(),r.a.createElement("div",{className:"relationships-list"},a.displayRelationships())):a.props.relationships&&0===a.props.relationships.length?r.a.createElement("div",null,r.a.createElement("h4",null,"You're not tracking any relationships!")):void 0},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(f.a,{className:"relationships-container"},r.a.createElement("h2",null,"Connections"),r.a.createElement(_e,{userId:this.props.userId,handleNewRelationship:this.props.handleNewRelationship}),this.displayRelationshipsPage())}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{listOrder:e.relationships}}}]),t}(n.Component),Se=function(e){var t=e.relationship,a=t.events,n=function(e){var t=Date.now();return e&&e.length?e.filter(function(e){return Date.parse(e.start_date)>t}).sort(function(e,t){return e.start_date<t.start_date?-1:1}):[]}(a),l=function(e){return e&&e.length>0?de(e[0].end_date):null}(function(e){var t=Date.now();return e&&e.length?e.filter(function(e){return Date.parse(e.start_date)<t}).sort(function(e,t){return e.start_date>t.start_date?-1:1}):[]}(a));return e.relationship.first_name?r.a.createElement(f.a,{className:"profile-container"},r.a.createElement("img",{src:"".concat(t.image),className:"profile-img",alt:"".concat(t.first_name," ").concat(t.last_name)}),r.a.createElement("div",{className:"profile-info"},r.a.createElement("h1",null,t.first_name," ",t.last_name),r.a.createElement("br",null),r.a.createElement("span",{className:"connection"},r.a.createElement("i",{class:"fas fa-user"}),t.relationship_type),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("i",{class:"fas fa-envelope"})," Email: ",t.email),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("i",{class:"fas fa-mobile-alt"})," Phone: ",S(t.phone_number)),r.a.createElement("br",null)),r.a.createElement(Ne,{relationship:e.relationship,viewRelationship:e.viewRelationship,updateRelationships:e.updateRelationships}),r.a.createElement("div",{className:"reminders"},r.a.createElement("p",null,"Reminders:"),r.a.createElement("span",null,function(e,t){if(null!==t){var a="You met up with ".concat(e.first_name);return 1===t?"".concat(a," yesterday."):"".concat(a," ").concat(t," days ago.")}return"You haven't met up with ".concat(e.first_name," yet! \n    They'd probably love it if you invited them to coffee!")}(t,l)," "),r.a.createElement("span",null,function(e,t){if(null!==t&&t>=e.contact_frequency)return"It's been a while. I think it's time to make plans to get together!"}(t,l)),r.a.createElement("br",null)),r.a.createElement("div",{className:"profile-stats"},r.a.createElement("p",null,r.a.createElement("span",null,"Last meetup:"),r.a.createElement("br",null),he(t)),r.a.createElement("p",null,r.a.createElement("span",null,"Meetup cycle:"),r.a.createElement("br",null),"Every ",t.contact_frequency," days"),r.a.createElement("br",null)),r.a.createElement(ae,{userId:e.userId,relationship:e.relationship,relationships:e.relationships,viewRelationship:e.viewRelationship,updateRelationships:e.updateRelationships,events:n,viewEvent:e.viewEvent,handleNewEvent:e.handleNewEvent,updateEvents:e.updateEvents,handleDeletedEvent:e.handleDeletedEvent})):r.a.createElement(E.a,{to:"/relationships"})},Re=function(e){var t=Object(n.useState)(!1),a=Object(g.a)(t,2),l=(a[0],a[1]),i=Object(n.useState)(""),s=Object(g.a)(i,2),o=s[0],c=s[1],u=Object(n.useState)(""),m=Object(g.a)(u,2),p=m[0],h=m[1],d=Object(n.useState)(""),E=Object(g.a)(d,2),v=E[0],w=E[1],y=Object(n.useState)(""),j=Object(g.a)(y,2),N=j[0],O=j[1],_=function(e){switch(e.persist(),e.target.name){case"first_name":c(e.target.value);break;case"last_name":h(e.target.value);break;case"email":w(e.target.value);break;case"password":O(e.target.value);break;default:return null}},C=function(t,a){t.preventDefault(),t.persist();for(var n={},r=0;r<t.target.length-1;r++)n[t.target[r].name]=t.target[r].value;(function(e){return fetch("".concat(I,"/users"),{method:"POST",headers:{"Content-Type":"application/json",Accepts:"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()})})(n).then(function(t){t.error?(l(!0),console.log("signup failed")):e.history.push("/login")})};return r.a.createElement(f.a,null,r.a.createElement("h3",null,"New User Signup"),r.a.createElement(D.a,{onSubmit:function(t){return C(t,e.history)}},r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"First Name"),r.a.createElement(D.a.Control,{type:"text",name:"first_name",placeholder:"First Name",value:o,onChange:function(e){return _(e)}})),r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"Last Name"),r.a.createElement(D.a.Control,{type:"text",name:"last_name",placeholder:"Last Name",value:p,onChange:function(e){return _(e)}})),r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"User Email"),r.a.createElement(D.a.Control,{type:"email",name:"email",placeholder:"Email",value:v,onChange:function(e){return _(e)}})),r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"User Password"),r.a.createElement(D.a.Control,{type:"password",name:"password",placeholder:"Password",value:N,onChange:function(e){return _(e)}})),r.a.createElement(b.a,{type:"submit"},"Sign up")))},De=function(e){var t=Object(n.useState)(!1),a=Object(g.a)(t,2),l=(a[0],a[1]),i=Object(n.useState)(""),s=Object(g.a)(i,2),o=s[0],c=s[1],u=Object(n.useState)(""),m=Object(g.a)(u,2),p=m[0],h=m[1],d=function(e){switch(e.persist(),e.target.name){case"email":c(e.target.value);break;case"password":h(e.target.value);break;default:return null}},E=function(t){t.preventDefault(),t.persist();for(var a={},n=0;n<t.target.length-1;n++)a[t.target[n].name]=t.target[n].value;(function(e){return console.log("logging in"),fetch("".concat(I,"/auth"),{method:"POST",headers:{"Content-Type":"application/json",Accepts:"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()})})(a).then(function(t){t.error?(l(!0),console.log("login failed")):(e.handleLogin(t),e.history.push("/"))})};return r.a.createElement(f.a,null,r.a.createElement("h3",null,"Log In"),r.a.createElement(D.a,{onSubmit:function(e){return E(e)}},r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"Email"),r.a.createElement(D.a.Control,{type:"email",placeholder:"Email",name:"email",value:o,onChange:function(e){return d(e)}})),r.a.createElement(D.a.Group,null,r.a.createElement(D.a.Label,null,"Password"),r.a.createElement(D.a.Control,{type:"password",placeholder:"Password",name:"password",value:p,onChange:function(e){return d(e)}})),r.a.createElement(b.a,{type:"submit"},"Log in")))},ke=(a(157),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleSetState=function(e){Array.isArray(e)?a.setState({relationships:e}):a.setState({events:e})},a.login=function(e){var t=Object(o.a)({},a.state.auth,{user:e.user}),n=e.jwt;localStorage.setItem("token",n),a.setState({auth:t}),ve(n,a.handleSetState),F(n,a.handleSetState)},a.logout=function(){localStorage.removeItem("token"),a.setState({auth:{user:{}}})},a.handleNewEvent=function(e){var t=[].concat(Object(s.a)(a.state.events.future_events),[e]).sort(function(e,t){return t.start_date>e.start_date?-1:1});a.setState({events:Object(o.a)({},a.state.events,{future_events:t})}),a.setState({eventView:e})},a.updateEvents=function(e){if(Array.isArray(e))a.setState({events:e});else{var t=a.state.events.future_events.map(function(t){return e.id===t.id?e:t}),n=Object(o.a)({},a.state.events,{future_events:t});a.setState({events:n,eventView:e})}},a.handleDeletedEvent=function(e){a.setState({events:e})},a.viewEvent=function(e){a.setState({eventView:e})},a.handleNewRelationship=function(e){a.setState({relationships:[e].concat(Object(s.a)(a.state.relationships))}),a.setState({relationshipView:e})},a.viewRelationship=function(e){a.setState({relationshipView:e})},a.updateRelationships=function(e){var t=a.state.relationships.map(function(t){return t.id===e.id?e:t});a.setState({relationships:t})},a.handleDeletedRelationship=function(e){a.setState({relationships:e})},a.updateUserProfile=function(e){a.setState({auth:{user:e.user}})},a.state={auth:{user:{}},events:{future_events:[],past_events:[]},relationships:[],eventView:{},relationshipView:{}},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");t&&function(e){return fetch("".concat(I,"/current_user"),L(e)).then(function(e){return e.json()})}(t).then(function(a){var n=Object(o.a)({},e.state.auth,{user:a.user});e.setState({auth:n}),ve(t,e.handleSetState),F(t,e.handleSetState)})}},{key:"componentDidUpdate",value:function(e,t){if(this.state.events!==t.events){var a=localStorage.getItem("token");ve(a,this.handleSetState),function(e,t){var a=localStorage.getItem("token");fetch("".concat(I,"/relationships/").concat(e.id),L(a)).then(function(e){return e.json()}).then(function(e){return t(e)})}(this.state.relationshipView,this.viewRelationship)}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"app"},r.a.createElement(d.a,null,r.a.createElement(v,{handleLogout:this.logout}),r.a.createElement(E.b,{exact:!0,path:"/",render:function(){return r.a.createElement(le,{user:e.state.auth.user.email})}}),r.a.createElement(E.b,{path:"/account",render:function(){return r.a.createElement(pe,{user:e.state.auth.user,events:e.state.events,updateUserProfile:e.updateUserProfile})}}),r.a.createElement(E.b,{path:"/events",render:function(t){return r.a.createElement(ne,Object.assign({},t,{userId:e.state.auth.user.id,events:e.state.events,relationships:e.state.relationships,handleNewEvent:e.handleNewEvent,viewEvent:e.viewEvent,updateEvents:e.updateEvents,handleDeletedEvent:e.handleDeletedEvent,viewRelationship:e.viewRelationship,updateRelationships:e.updateRelationships}))}}),r.a.createElement(E.b,{path:"/event/:name",render:function(){return r.a.createElement(re,{event:e.state.eventView})}}),r.a.createElement(E.b,{path:"/relationships",exact:!0,render:function(){return r.a.createElement(Ce,{userId:e.state.auth.user.id,relationships:e.state.relationships,handleNewRelationship:e.handleNewRelationship,viewRelationship:e.viewRelationship,updateRelationships:e.updateRelationships,handleDeletedRelationship:e.handleDeletedRelationship,updateEvents:e.updateEvents})}}),r.a.createElement(E.b,{path:"/relationships/:id",render:function(){return r.a.createElement(Se,{userId:e.state.auth.user.id,relationship:e.state.relationshipView,relationships:e.state.relationships,viewRelationship:e.viewRelationship,updateRelationships:e.updateRelationships,handleNewEvent:e.handleNewEvent,handleDeletedEvent:e.handleDeletedEvent,viewEvent:e.viewEvent,updateEvents:e.updateEvents,events:e.state.events})}}),r.a.createElement(E.b,{path:"/signup",component:Re}),r.a.createElement(E.b,{path:"/login",render:function(t){return r.a.createElement(De,Object.assign({},t,{handleLogin:e.login}))}}),r.a.createElement(E.b,{path:"/logout",component:le})))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ke,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[127,1,2]]]);
//# sourceMappingURL=main.c81b58f0.chunk.js.map